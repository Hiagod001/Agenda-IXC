<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uai Telecom - Sistema de Agenda</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <img src="logo.png" alt="Uai Telecom" class="loading-logo">
            <div class="loading-spinner">
                <div class="spinner"></div>
            </div>
            <p>Carregando sistema...</p>
        </div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="header-left">
                <button class="menu-toggle" onclick="toggleSidebar()">
                    <i class="fas fa-bars"></i>
                </button>
                <img src="logo.png" alt="Uai Telecom" class="header-logo">
                <h1>Sistema de Agenda</h1>
            </div>
            
            <div class="header-right">
                <div class="user-info">
                    <span class="user-name" id="userName">Carregando...</span>
                    <div class="user-menu">
                        <button class="user-button" onclick="toggleUserMenu()">
                            <i class="fas fa-user-circle"></i>
                        </button>
                        <div class="user-dropdown" id="userDropdown">
                            <a href="#" onclick="showProfile()">
                                <i class="fas fa-user"></i> Perfil
                            </a>
                            <a href="#" onclick="showSettings()">
                                <i class="fas fa-cog"></i> Configurações
                            </a>
                            <hr>
                            <a href="/logout">
                                <i class="fas fa-sign-out-alt"></i> Sair
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <nav class="sidebar-nav">
            <ul class="nav-list">
                <li class="nav-item active">
                    <a href="#" onclick="showSection('dashboard')" class="nav-link">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="agenda-dashboard.html" class="nav-link">
                        <i class="fas fa-calendar-check"></i>
                        <span>Dashboard de Agenda</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" onclick="showSection('agendamentos')" class="nav-link">
                        <i class="fas fa-calendar-alt"></i>
                        <span>Agendamentos</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" onclick="showSection('novo-agendamento')" class="nav-link">
                        <i class="fas fa-plus-circle"></i>
                        <span>Novo Agendamento</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" onclick="showSection('vagas')" class="nav-link">
                        <i class="fas fa-clock"></i>
                        <span>Consultar Vagas</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" onclick="showSection('relatorios')" class="nav-link">
                        <i class="fas fa-chart-bar"></i>
                        <span>Relatórios</span>
                    </a>
                </li>
            </ul>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Dashboard Section -->
        <section id="dashboard" class="content-section active">
            <div class="section-header">
                <h2>Dashboard</h2>
                <p>Visão geral do sistema de agendamentos</p>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="totalAgendamentos">0</h3>
                        <p>Total de Agendamentos</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="agendamentosHoje">0</h3>
                        <p>Agendamentos Hoje</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="agendamentosConcluidos">0</h3>
                        <p>Concluídos</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="agendamentosPendentes">0</h3>
                        <p>Pendentes</p>
                    </div>
                </div>
            </div>
            
            <div class="dashboard-content">
                <div class="recent-appointments">
                    <h3>Agendamentos Recentes</h3>
                    <div class="appointments-list" id="recentAppointments">
                        <!-- Será preenchido via JavaScript -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Agendamentos Section -->
        <section id="agendamentos" class="content-section">
            <div class="section-header">
                <h2>Lista de Agendamentos</h2>
                <div class="section-actions">
                    <button class="btn btn-primary" onclick="showSection('novo-agendamento')">
                        <i class="fas fa-plus"></i> Novo Agendamento
                    </button>
                </div>
            </div>
            
            <div class="filters-container">
                <div class="filter-group">
                    <label for="filterStatus">Status:</label>
                    <select id="filterStatus" onchange="filterAgendamentos()">
                        <option value="">Todos</option>
                        <option value="Aberta">Aberta</option>
                        <option value="Agendada">Agendada</option>
                        <option value="Em andamento">Em andamento</option>
                        <option value="Concluída">Concluída</option>
                        <option value="Cancelada">Cancelada</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="filterCidade">Cidade:</label>
                    <select id="filterCidade" onchange="filterAgendamentos()">
                        <option value="">Todas</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="filterTecnico">Técnico:</label>
                    <select id="filterTecnico" onchange="filterAgendamentos()">
                        <option value="">Todos</option>
                    </select>
                </div>
                
                <button class="btn btn-secondary" onclick="clearFilters()">
                    <i class="fas fa-times"></i> Limpar Filtros
                </button>
            </div>
            
            <div class="table-container">
                <table class="data-table" id="agendamentosTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Cliente</th>
                            <th>Assunto</th>
                            <th>Cidade</th>
                            <th>Data/Hora</th>
                            <th>Técnico</th>
                            <th>Status</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Será preenchido via JavaScript -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Novo Agendamento Section -->
        <section id="novo-agendamento" class="content-section">
            <div class="section-header">
                <h2>Novo Agendamento</h2>
                <p>Preencha os dados para criar um novo agendamento</p>
            </div>
            
            <form id="agendamentoForm" class="form-container">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="clienteId">ID do Cliente:</label>
                        <div class="input-with-button">
                            <input type="text" id="clienteId" name="id" required>
                            <button type="button" onclick="buscarCliente()" class="btn btn-secondary">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="clienteNome">Nome do Cliente:</label>
                        <input type="text" id="clienteNome" name="cliente" readonly>
                    </div>
                    
                    <div class="form-group">
                        <label for="assunto">Assunto:</label>
                        <select id="assunto" name="assunto" required>
                            <option value="">Selecione o assunto</option>
                            <option value="SEM CONEXÃO">Sem Conexão</option>
                            <option value="CONEXÃO LENTA">Conexão Lenta</option>
                            <option value="AGENDAMENTO">Agendamento</option>
                            <option value="INSTALAÇÃO">Instalação</option>
                            <option value="MANUTENÇÃO">Manutenção</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="cidade">Cidade:</label>
                        <select id="cidade" name="cidade" required>
                            <option value="">Selecione a cidade</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="dataHora">Data e Hora:</label>
                        <input type="datetime-local" id="dataHora" name="data_hora" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="tecnico">Técnico:</label>
                        <select id="tecnico" name="tecnico">
                            <option value="">Selecione o técnico</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group full-width">
                    <label for="observacao">Observações:</label>
                    <textarea id="observacao" name="observacao" rows="4" placeholder="Observações adicionais..."></textarea>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Salvar Agendamento
                    </button>
                    <button type="button" class="btn btn-secondary" onclick="limparFormulario()">
                        <i class="fas fa-times"></i> Limpar
                    </button>
                </div>
            </form>
        </section>

        <!-- Consultar Vagas Section -->
        <section id="vagas" class="content-section">
            <div class="section-header">
                <h2>Consultar Vagas</h2>
                <p>Verifique a disponibilidade de vagas por cidade e data</p>
            </div>
            
            <div class="vagas-filters">
                <div class="filter-group">
                    <label for="vagasCidade">Cidade:</label>
                    <select id="vagasCidade" required>
                        <option value="">Selecione a cidade</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="vagasData">Data:</label>
                    <input type="date" id="vagasData" required>
                </div>
                
                <button class="btn btn-primary" onclick="consultarVagas()">
                    <i class="fas fa-search"></i> Consultar
                </button>
            </div>
            
            <div id="vagasResult" class="vagas-result" style="display: none;">
                <!-- Resultado será preenchido via JavaScript -->
            </div>
        </section>

        <!-- Relatórios Section -->
        <section id="relatorios" class="content-section">
            <div class="section-header">
                <h2>Relatórios</h2>
                <p>Visualize estatísticas e relatórios do sistema</p>
            </div>
            
            <div class="reports-grid">
                <div class="report-card">
                    <h3>Agendamentos por Status</h3>
                    <canvas id="statusChart"></canvas>
                </div>
                
                <div class="report-card">
                    <h3>Agendamentos por Cidade</h3>
                    <canvas id="cidadeChart"></canvas>
                </div>
                
                <div class="report-card">
                    <h3>Agendamentos por Técnico</h3>
                    <canvas id="tecnicoChart"></canvas>
                </div>
                
                <div class="report-card">
                    <h3>Agendamentos por Mês</h3>
                    <canvas id="mesChart"></canvas>
                </div>
            </div>
        </section>
    </main>

    <!-- Modal para editar agendamento -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Editar Agendamento</h3>
                <button class="modal-close" onclick="closeEditModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form id="editForm" class="modal-form">
                <input type="hidden" id="editId">
                
                <div class="form-grid">
                    <div class="form-group">
                        <label for="editCliente">Cliente:</label>
                        <input type="text" id="editCliente" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="editAssunto">Assunto:</label>
                        <select id="editAssunto" required>
                            <option value="SEM CONEXÃO">Sem Conexão</option>
                            <option value="CONEXÃO LENTA">Conexão Lenta</option>
                            <option value="AGENDAMENTO">Agendamento</option>
                            <option value="INSTALAÇÃO">Instalação</option>
                            <option value="MANUTENÇÃO">Manutenção</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="editCidade">Cidade:</label>
                        <select id="editCidade" required></select>
                    </div>
                    
                    <div class="form-group">
                        <label for="editDataHora">Data e Hora:</label>
                        <input type="datetime-local" id="editDataHora" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="editTecnico">Técnico:</label>
                        <select id="editTecnico"></select>
                    </div>
                    
                    <div class="form-group">
                        <label for="editStatus">Status:</label>
                        <select id="editStatus" required>
                            <option value="Aberta">Aberta</option>
                            <option value="Agendada">Agendada</option>
                            <option value="Em andamento">Em andamento</option>
                            <option value="Concluída">Concluída</option>
                            <option value="Cancelada">Cancelada</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group full-width">
                    <label for="editObservacao">Observações:</label>
                    <textarea id="editObservacao" rows="3"></textarea>
                </div>
                
                <div class="modal-actions">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Salvar
                    </button>
                    <button type="button" class="btn btn-secondary" onclick="closeEditModal()">
                        <i class="fas fa-times"></i> Cancelar
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="toast-container"></div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="scripts.js"></script>
</body>
</html>

